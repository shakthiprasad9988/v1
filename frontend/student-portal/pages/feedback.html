<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback & Grades - File Submission Portal</title>
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="../styles/feedback.css">
    <link rel="stylesheet" href="../styles/global-search.css">
    <link rel="stylesheet" href="../styles/notifications.css">
    <link rel="stylesheet" href="../styles/transitions.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class='bx bx-file'></i>
                <span>FilePortal</span>
            </div>
        </div>

        <nav class="sidebar-nav">
            <a href="dashboard.html" class="nav-item">
                <i class='bx bx-home'></i>
                <span>Dashboard</span>
            </a>
            <a href="upload.html" class="nav-item">
                <i class='bx bx-upload'></i>
                <span>Upload Files</span>
            </a>
            <a href="submissions.html" class="nav-item">
                <i class='bx bx-folder'></i>
                <span>My Submissions</span>
            </a>
            <a href="feedback.html" class="nav-item active">
                <i class='bx bx-message-square-detail'></i>
                <span>Feedback & Grades</span>
            </a>
            <a href="collaboration.html" class="nav-item">
                <i class='bx bx-group'></i>
                <span>Collaboration</span>
            </a>
            <a href="calendar.html" class="nav-item">
                <i class='bx bx-calendar'></i>
                <span>Calendar</span>
            </a>
            <a href="analytics.html" class="nav-item">
                <i class='bx bx-bar-chart'></i>
                <span>Analytics</span>
            </a>
            <a href="chat.html" class="nav-item">
                <i class='bx bx-message-dots'></i>
                <span>Messages</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <a href="settings.html" class="nav-item">
                <i class='bx bx-cog'></i>
                <span>Settings</span>
            </a>
            <a href="../../shared/pages/login.html" class="nav-item">
                <i class='bx bx-log-out'></i>
                <span>Logout</span>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <header class="topbar">
            <div class="topbar-left">
                <button class="menu-toggle" id="menuToggle">
                    <i class='bx bx-menu'></i>
                </button>
                <h1>Feedback & Grades</h1>
            </div>
            
            <!-- Global Search -->
            <div class="global-search-container">
                <div class="global-search-wrapper">
                    <i class='bx bx-search search-icon'></i>
                    <input type="text" id="globalSearchInput" class="global-search-input" placeholder="Search submissions, feedback, groups..." autocomplete="off">
                    <span class="search-shortcut">Ctrl+K</span>
                </div>
                <div id="globalSearchResults" class="global-search-results">
                    <!-- Search results will appear here -->
                </div>
            </div>
            
            <div class="topbar-right">
                <button class="notification-btn">
                    <i class='bx bx-bell'></i>
                    <span class="badge">3</span>
                </button>
                <div class="profile-menu">
                    <img src="https://ui-avatars.com/api/?name=Student+User&background=667eea&color=fff" alt="Profile">
                    <span>Student User</span>
                    <i class='bx bx-chevron-down'></i>
                </div>
            </div>
        </header>

        <!-- Feedback Container -->
        <div class="feedback-container">
            <!-- Stats Overview -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                        <i class='bx bx-bar-chart'></i>
                    </div>
                    <div class="stat-info">
                        <h3>Average Grade</h3>
                        <p class="stat-value">B+</p>
                        <span class="stat-change positive">
                            <i class='bx bx-trending-up'></i> +5% from last month
                        </span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4caf50, #45a049);">
                        <i class='bx bx-message-dots'></i>
                    </div>
                    <div class="stat-info">
                        <h3>Total Feedback</h3>
                        <p class="stat-value">24</p>
                        <span class="stat-change">
                            <i class='bx bx-time'></i> 3 new this week
                        </span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #ff9800, #f57c00);">
                        <i class='bx bx-trending-up'></i>
                    </div>
                    <div class="stat-info">
                        <h3>Improvement</h3>
                        <p class="stat-value">+12%</p>
                        <span class="stat-change positive">
                            <i class='bx bx-happy'></i> Great progress!
                        </span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #2196f3, #1976d2);">
                        <i class='bx bx-message-error'></i>
                    </div>
                    <div class="stat-info">
                        <h3>Pending Appeals</h3>
                        <p class="stat-value">0</p>
                        <span class="stat-change">
                            <i class='bx bx-check'></i> All resolved
                        </span>
                    </div>
                </div>
            </div>

            <!-- Filter Bar -->
            <div class="filter-section">
                <div class="filter-group">
                    <label>Course</label>
                    <select id="filterCourse" class="filter-select">
                        <option value="all">All Courses</option>
                        <option value="data-structures">Data Structures</option>
                        <option value="web-dev">Web Development</option>
                        <option value="database">Database Systems</option>
                        <option value="ml">Machine Learning</option>
                        <option value="algorithms">Algorithm Design</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>Grade Range</label>
                    <select id="filterGrade" class="filter-select">
                        <option value="all">All Grades</option>
                        <option value="a">A Range (A+, A, A-)</option>
                        <option value="b">B Range (B+, B, B-)</option>
                        <option value="c">C Range (C+, C, C-)</option>
                        <option value="below">Below C</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>Date Range</label>
                    <select id="filterDate" class="filter-select">
                        <option value="all">All Time</option>
                        <option value="week">This Week</option>
                        <option value="month">This Month</option>
                        <option value="semester">This Semester</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>Type</label>
                    <select id="filterType" class="filter-select">
                        <option value="all">All Types</option>
                        <option value="graded">Graded Only</option>
                        <option value="comments">With Comments</option>
                        <option value="inline">With Inline Feedback</option>
                    </select>
                </div>
            </div>

            <!-- Feedback List -->
            <div id="feedbackList" class="feedback-list">
                <!-- Feedback items will be loaded here -->
            </div>
        </div>
    </main>

    <script src="../../shared/utils/page-transition.js"></script>
    <script src="../utils/notifications.js"></script>
    <script src="../utils/dashboard.js"></script>
    <script src="../utils/feedback.js"></script>
    <script src="../utils/global-search.js"></script>
    <script src="../utils/search-filters.js"></script>
    <script src="../utils/lazy-loader.js" defer></script>
    <script src="../utils/performance-monitor.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator && window.location.protocol !== 'file:') {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('✅ Service Worker registered'))
                    .catch(err => console.error('❌ SW registration failed:', err));
            });
        }
    </script>
</body>
</html>
