<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Files - File Submission Portal</title>
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="../styles/upload.css">
    <link rel="stylesheet" href="../styles/global-search.css">
    <link rel="stylesheet" href="../styles/notifications.css">
    <link rel="stylesheet" href="../styles/transitions.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class='bx bx-file'></i>
                <span>FilePortal</span>
            </div>
        </div>

        <nav class="sidebar-nav">
            <a href="dashboard.html" class="nav-item">
                <i class='bx bx-home'></i>
                <span>Dashboard</span>
            </a>
            <a href="upload.html" class="nav-item active">
                <i class='bx bx-upload'></i>
                <span>Upload Files</span>
            </a>
            <a href="submissions.html" class="nav-item">
                <i class='bx bx-folder'></i>
                <span>My Submissions</span>
            </a>
            <a href="feedback.html" class="nav-item">
                <i class='bx bx-message-square-detail'></i>
                <span>Feedback & Grades</span>
            </a>
            <a href="collaboration.html" class="nav-item">
                <i class='bx bx-group'></i>
                <span>Collaboration</span>
            </a>
            <a href="calendar.html" class="nav-item">
                <i class='bx bx-calendar'></i>
                <span>Calendar</span>
            </a>
            <a href="analytics.html" class="nav-item">
                <i class='bx bx-bar-chart'></i>
                <span>Analytics</span>
            </a>
            <a href="chat.html" class="nav-item">
                <i class='bx bx-message-dots'></i>
                <span>Messages</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <a href="settings.html" class="nav-item">
                <i class='bx bx-cog'></i>
                <span>Settings</span>
            </a>
            <a href="../../shared/pages/login.html" class="nav-item">
                <i class='bx bx-log-out'></i>
                <span>Logout</span>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <header class="topbar">
            <div class="topbar-left">
                <button class="menu-toggle" id="menuToggle">
                    <i class='bx bx-menu'></i>
                </button>
                <h1>Upload Files</h1>
            </div>
            
            <!-- Global Search -->
            <div class="global-search-container">
                <div class="global-search-wrapper">
                    <i class='bx bx-search search-icon'></i>
                    <input type="text" id="globalSearchInput" class="global-search-input" placeholder="Search submissions, feedback, groups..." autocomplete="off">
                    <span class="search-shortcut">Ctrl+K</span>
                </div>
                <div id="globalSearchResults" class="global-search-results"></div>
            </div>
            
            <div class="topbar-right">
                <button class="notification-btn">
                    <i class='bx bx-bell'></i>
                    <span class="badge">3</span>
                </button>
                <div class="profile-menu">
                    <img src="https://ui-avatars.com/api/?name=Student+User&background=667eea&color=fff" alt="Profile">
                    <span>Student User</span>
                    <i class='bx bx-chevron-down'></i>
                </div>
            </div>
        </header>

        <!-- Upload Container -->
        <div class="upload-container">
            <div class="upload-card">
                <div class="card-header">
                    <h2>Submit New Assignment</h2>
                    <p>Fill in the details and upload your files</p>
                </div>

                <form id="uploadForm" class="upload-form">
                    <!-- Assignment Title -->
                    <div class="form-group">
                        <label for="assignmentTitle">Assignment Title <span class="required">*</span></label>
                        <input type="text" id="assignmentTitle" class="input-field" placeholder="Enter assignment title" required>
                    </div>

                    <!-- Course Selection -->
                    <div class="form-group">
                        <label for="course">Select Course <span class="required">*</span></label>
                        <select id="course" class="select-field" required>
                            <option value="" disabled selected>Choose a course</option>
                            <option value="software-engineering">Software Engineering</option>
                            <option value="data-structures">Data Structures</option>
                            <option value="web-development">Web Development</option>
                            <option value="database-systems">Database Systems</option>
                            <option value="machine-learning">Machine Learning</option>
                            <option value="computer-networks">Computer Networks</option>
                        </select>
                    </div>

                    <!-- Description -->
                    <div class="form-group">
                        <label for="description">Description (Optional)</label>
                        <textarea id="description" class="textarea-field" placeholder="Add any additional notes or comments..."></textarea>
                    </div>

                    <!-- File Upload Area -->
                    <div class="form-group">
                        <label>Upload Files <span class="required">*</span></label>
                        <div class="file-upload-area" id="fileUploadArea">
                            <i class='bx bx-cloud-upload upload-icon'></i>
                            <h3>Drag & Drop Files Here</h3>
                            <p>or click to browse</p>
                            <p class="file-types">Supported: PDF, DOC, DOCX, TXT, ZIP, Images (Max 50MB per file)</p>
                            <input type="file" id="fileInput" multiple accept=".pdf,.doc,.docx,.txt,.zip,.jpg,.jpeg,.png,.gif">
                        </div>
                    </div>

                    <!-- Selected Files List -->
                    <div id="selectedFilesContainer" class="selected-files"></div>

                    <!-- Upload Progress -->
                    <div id="uploadProgress" class="upload-progress">
                        <div class="progress-bar-container">
                            <div id="progressBar" class="progress-bar">0%</div>
                        </div>
                        <p id="progressText" class="progress-text">Preparing upload...</p>
                    </div>

                    <!-- Success Message -->
                    <div id="successMessage" class="success-message">
                        <i class='bx bx-check-circle'></i>
                        <h3>Upload Successful!</h3>
                        <p>Your assignment has been submitted successfully.</p>
                    </div>

                    <!-- Buttons -->
                    <div class="button-group">
                        <button type="button" class="btn-secondary" onclick="saveAsDraft()">
                            <i class='bx bx-save'></i> Save as Draft
                        </button>
                        <button type="submit" id="submitBtn" class="input-submit" disabled>
                            <i class='bx bx-upload'></i> Submit Assignment
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <script src="../../shared/utils/page-transition.js"></script>
    <script src="../utils/notifications.js"></script>
    <script src="../utils/dashboard.js"></script>
    <script src="../utils/upload.js"></script>
    <script src="../utils/global-search.js"></script>
    <script src="../utils/search-filters.js"></script>
    <script src="../utils/lazy-loader.js" defer></script>
    <script src="../utils/performance-monitor.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator && window.location.protocol !== 'file:') {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('✅ Service Worker registered'))
                    .catch(err => console.error('❌ SW registration failed:', err));
            });
        }
    </script>
</body>
</html>
