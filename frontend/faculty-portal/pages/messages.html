<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages - Faculty Portal</title>
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="../styles/messages.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class='bx bx-file'></i>
                <span>Faculty Portal</span>
            </div>
        </div>

        <nav class="sidebar-nav">
            <a href="dashboard.html" class="nav-item">
                <i class='bx bx-home'></i>
                <span>Dashboard</span>
            </a>
            <a href="assignments.html" class="nav-item">
                <i class='bx bx-task'></i>
                <span>Assignments</span>
            </a>
            <a href="submissions.html" class="nav-item">
                <i class='bx bx-folder-open'></i>
                <span>Submissions</span>
            </a>
            <a href="grading.html" class="nav-item">
                <i class='bx bx-edit'></i>
                <span>Grading</span>
            </a>
            <a href="students.html" class="nav-item">
                <i class='bx bx-group'></i>
                <span>Students</span>
            </a>
            <a href="analytics.html" class="nav-item">
                <i class='bx bx-bar-chart-alt-2'></i>
                <span>Analytics</span>
            </a>
            <a href="#" class="nav-item active">
                <i class='bx bx-message-dots'></i>
                <span>Messages</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <a href="settings.html" class="nav-item">
                <i class='bx bx-cog'></i>
                <span>Settings</span>
            </a>
            <a href="../../shared/pages/login.html" class="nav-item">
                <i class='bx bx-log-out'></i>
                <span>Logout</span>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <header class="topbar">
            <div class="topbar-left">
                <button class="menu-toggle" id="menuToggle">
                    <i class='bx bx-menu'></i>
                </button>
                <h1>Messages</h1>
            </div>
            <div class="topbar-right">
                <button class="btn-primary" id="newMessageBtn">
                    <i class='bx bx-plus'></i>
                    New Message
                </button>
                <button class="notification-btn">
                    <i class='bx bx-bell'></i>
                    <span class="badge">5</span>
                </button>
                <div class="profile-menu">
                    <img src="https://ui-avatars.com/api/?name=Faculty+User&background=764ba2&color=fff" alt="Profile">
                    <span>Dr. Faculty</span>
                    <i class='bx bx-chevron-down'></i>
                </div>
            </div>
        </header>

        <!-- Messages Content -->
        <div class="messages-container">
            <!-- Messages Sidebar -->
            <div class="messages-sidebar">
                <div class="sidebar-header">
                    <div class="search-box">
                        <i class='bx bx-search'></i>
                        <input type="text" placeholder="Search messages..." id="messageSearch">
                    </div>
                </div>

                <div class="message-filters">
                    <button class="filter-tab active" data-filter="all">
                        <i class='bx bx-inbox'></i>
                        All Messages
                        <span class="count">24</span>
                    </button>
                    <button class="filter-tab" data-filter="unread">
                        <i class='bx bx-envelope'></i>
                        Unread
                        <span class="count">8</span>
                    </button>
                    <button class="filter-tab" data-filter="starred">
                        <i class='bx bx-star'></i>
                        Starred
                        <span class="count">5</span>
                    </button>
                    <button class="filter-tab" data-filter="sent">
                        <i class='bx bx-send'></i>
                        Sent
                        <span class="count">12</span>
                    </button>
                </div>

                <div class="conversations-list" id="conversationsList">
                    <!-- Conversation 1 -->
                    <div class="conversation-item active unread" data-id="1">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=667eea&color=fff" alt="Student">
                        <div class="conversation-content">
                            <div class="conversation-header">
                                <h4>John Doe</h4>
                                <span class="time">10:30 AM</span>
                            </div>
                            <p class="message-preview">Question about Assignment 3...</p>
                            <div class="conversation-meta">
                                <span class="unread-badge">2</span>
                            </div>
                        </div>
                    </div>

                    <!-- Conversation 2 -->
                    <div class="conversation-item" data-id="2">
                        <img src="https://ui-avatars.com/api/?name=Jane+Smith&background=667eea&color=fff" alt="Student">
                        <div class="conversation-content">
                            <div class="conversation-header">
                                <h4>Jane Smith</h4>
                                <span class="time">Yesterday</span>
                            </div>
                            <p class="message-preview">Thank you for the feedback!</p>
                        </div>
                    </div>

                    <!-- Conversation 3 -->
                    <div class="conversation-item unread" data-id="3">
                        <img src="https://ui-avatars.com/api/?name=Mike+Johnson&background=667eea&color=fff" alt="Student">
                        <div class="conversation-content">
                            <div class="conversation-header">
                                <h4>Mike Johnson</h4>
                                <span class="time">2 days ago</span>
                            </div>
                            <p class="message-preview">Can I submit late?</p>
                            <div class="conversation-meta">
                                <span class="unread-badge">1</span>
                            </div>
                        </div>
                    </div>

                    <!-- Conversation 4 -->
                    <div class="conversation-item" data-id="4">
                        <img src="https://ui-avatars.com/api/?name=Sarah+Williams&background=667eea&color=fff" alt="Student">
                        <div class="conversation-content">
                            <div class="conversation-header">
                                <h4>Sarah Williams</h4>
                                <span class="time">3 days ago</span>
                            </div>
                            <p class="message-preview">Great class today!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Area -->
            <div class="chat-area">
                <div class="chat-header">
                    <div class="chat-user-info">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=667eea&color=fff" alt="Student">
                        <div>
                            <h3>John Doe</h3>
                            <span class="status online">Online</span>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="btn-icon" title="Star conversation">
                            <i class='bx bx-star'></i>
                        </button>
                        <button class="btn-icon" title="Archive">
                            <i class='bx bx-archive'></i>
                        </button>
                        <button class="btn-icon" title="More options">
                            <i class='bx bx-dots-vertical-rounded'></i>
                        </button>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <!-- Message from student -->
                    <div class="message received">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=667eea&color=fff" alt="Student">
                        <div class="message-content">
                            <div class="message-bubble">
                                <p>Hello Professor, I have a question about Assignment 3. Could you clarify the requirements for the data structure implementation?</p>
                                <span class="message-time">10:25 AM</span>
                            </div>
                        </div>
                    </div>

                    <!-- Message from faculty -->
                    <div class="message sent">
                        <div class="message-content">
                            <div class="message-bubble">
                                <p>Hi John! Of course. For the data structure implementation, you need to implement both the insert and search operations. Make sure to include proper error handling.</p>
                                <span class="message-time">10:28 AM</span>
                            </div>
                        </div>
                    </div>

                    <!-- Message from student -->
                    <div class="message received">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=667eea&color=fff" alt="Student">
                        <div class="message-content">
                            <div class="message-bubble">
                                <p>Thank you! That helps a lot. One more question - should we implement the delete operation as well?</p>
                                <span class="message-time">10:30 AM</span>
                            </div>
                        </div>
                    </div>

                    <!-- Typing indicator -->
                    <div class="typing-indicator">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=667eea&color=fff" alt="Student">
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>

                <div class="chat-input">
                    <button class="btn-icon" title="Attach file">
                        <i class='bx bx-paperclip'></i>
                    </button>
                    <button class="btn-icon" title="Emoji">
                        <i class='bx bx-smile'></i>
                    </button>
                    <input type="text" placeholder="Type a message..." id="messageInput">
                    <button class="btn-send" id="sendBtn">
                        <i class='bx bx-send'></i>
                    </button>
                </div>
            </div>

            <!-- Info Panel -->
            <div class="info-panel" id="infoPanel">
                <div class="info-header">
                    <h3>Contact Info</h3>
                    <button class="btn-icon" id="closeInfoPanel">
                        <i class='bx bx-x'></i>
                    </button>
                </div>

                <div class="info-content">
                    <div class="info-profile">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=667eea&color=fff" alt="Student">
                        <h3>John Doe</h3>
                        <p>2021CS001</p>
                    </div>

                    <div class="info-section">
                        <h4>Student Information</h4>
                        <div class="info-item">
                            <i class='bx bx-envelope'></i>
                            <span>john.doe@university.edu</span>
                        </div>
                        <div class="info-item">
                            <i class='bx bx-book'></i>
                            <span>CS 401 - Software Engineering</span>
                        </div>
                        <div class="info-item">
                            <i class='bx bx-star'></i>
                            <span>Average: 92%</span>
                        </div>
                    </div>

                    <div class="info-section">
                        <h4>Quick Actions</h4>
                        <button class="action-btn">
                            <i class='bx bx-user'></i>
                            View Profile
                        </button>
                        <button class="action-btn">
                            <i class='bx bx-folder'></i>
                            View Submissions
                        </button>
                        <button class="action-btn">
                            <i class='bx bx-edit'></i>
                            View Grades
                        </button>
                    </div>

                    <div class="info-section">
                        <h4>Shared Files</h4>
                        <div class="file-item">
                            <i class='bx bx-file'></i>
                            <div>
                                <span>assignment3.pdf</span>
                                <small>2.4 MB</small>
                            </div>
                        </div>
                        <div class="file-item">
                            <i class='bx bx-file'></i>
                            <div>
                                <span>project_report.docx</span>
                                <small>1.8 MB</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="../../shared/utils/page-transition.js"></script>
    <script src="../utils/topbar.js"></script>
    <script src="../utils/messages.js"></script>
</body>
</html>
